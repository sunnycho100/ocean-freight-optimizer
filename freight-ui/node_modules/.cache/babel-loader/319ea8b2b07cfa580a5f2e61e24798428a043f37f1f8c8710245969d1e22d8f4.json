{"ast":null,"code":"/**\r\n * Utility functions for generating Google Maps Directions URLs\r\n * No API key required - uses the public Google Maps web interface\r\n */\n\n/**\r\n * Cleans a location string by removing internal region codes\r\n * (e.g., \"BREMERHAVEN, HB, GERMANY\" -> \"BREMERHAVEN, GERMANY\")\r\n */\nexport function cleanLocationString(location) {\n  if (!location) return '';\n\n  // Split by commas and trim\n  const parts = location.split(',').map(s => s.trim());\n\n  // Common region codes to filter out (state/province abbreviations)\n  const regionCodes = ['HB', 'NW', 'BY', 'BW', 'HE', 'RP', 'BB',\n  // German states\n  'DROME', 'FRANCE' // Already has country\n  ];\n\n  // Filter out single/two-letter codes and known region abbreviations\n  const filtered = parts.filter(part => {\n    // Keep if it's a longer name or if it looks like a country\n    if (part.length > 3) return true;\n    // Remove if it's a known region code\n    if (regionCodes.includes(part.toUpperCase())) return false;\n    // Keep otherwise\n    return true;\n  });\n  return filtered.join(', ');\n}\n\n/**\r\n * Generates a Google Maps Directions URL for opening in a new tab\r\n * @param origin - Starting location (e.g., \"Le Havre, France\")\r\n * @param destination - Ending location (e.g., \"Bremerhaven, Germany\")\r\n * @param travelMode - Optional travel mode: driving (default), walking, bicycling, transit\r\n * @returns Full Google Maps Directions URL\r\n */\nexport function generateGoogleMapsDirectionsUrl(origin, destination, travelMode = 'driving') {\n  const cleanOrigin = cleanLocationString(origin);\n  const cleanDestination = cleanLocationString(destination);\n  const baseUrl = 'https://www.google.com/maps/dir/?api=1';\n  const params = new URLSearchParams({\n    origin: cleanOrigin,\n    destination: cleanDestination,\n    travelmode: travelMode\n  });\n  return `${baseUrl}&${params.toString()}`;\n}\n\n/**\r\n * Estimates appropriate zoom level based on origin and destination proximity\r\n * @param origin - Starting location\r\n * @param destination - Ending location\r\n * @returns Zoom level (higher = more zoomed in)\r\n * \r\n * Zoom levels (approximate distance ranges):\r\n * - 9 (120%): ≤200km - Same country, close cities\r\n * - 6 (90%): 200-500km - Same country far, or neighboring countries\r\n * - 5 (70%): 500-900km - Cross-regional routes (e.g., Germany-Italy)\r\n * - 4 (50%): ≥900km - Very distant routes (e.g., Netherlands-Hungary)\r\n */\n\n// Force all map embeds to use zoom level 6 (80%) for consistent comparison\nfunction estimateZoomLevel(origin, destination) {\n  return 6;\n}\n\n/**\r\n * Generates a Google Maps embed URL for an inline iframe preview (no API key required)\r\n * Uses the public web interface with output=embed. Automatically adjusts zoom based on\r\n * estimated distance (same country = closer = more zoom, different countries = farther = less zoom).\r\n */\nexport function generateGoogleMapsEmbedUrl(origin, destination, travelMode = 'driving') {\n  var _modeToFlag$travelMod;\n  const cleanOrigin = cleanLocationString(origin);\n  const cleanDestination = cleanLocationString(destination);\n\n  // Estimate zoom based on location proximity\n  const zoom = estimateZoomLevel(origin, destination);\n\n  // dirflg mapping mirrors Google Maps query params\n  const modeToFlag = {\n    driving: 'd',\n    walking: 'w',\n    bicycling: 'b',\n    transit: 'r'\n  };\n  const params = new URLSearchParams({\n    saddr: cleanOrigin,\n    daddr: cleanDestination,\n    dirflg: (_modeToFlag$travelMod = modeToFlag[travelMode]) !== null && _modeToFlag$travelMod !== void 0 ? _modeToFlag$travelMod : 'd',\n    output: 'embed',\n    z: String(zoom)\n  });\n  return `https://www.google.com/maps?${params.toString()}`;\n}\n\n/**\r\n * Simple test function to verify URL generation\r\n */\nexport function testGoogleMapsUrl() {\n  const testCases = [{\n    origin: 'Le Havre, France',\n    destination: 'Bremerhaven, Germany',\n    expectedOrigin: 'Le Havre, France',\n    expectedDest: 'Bremerhaven, Germany'\n  }, {\n    origin: 'BREMERHAVEN, HB, GERMANY',\n    destination: 'VALENCE, DROME, FRANCE',\n    expectedOrigin: 'BREMERHAVEN, GERMANY',\n    expectedDest: 'VALENCE, FRANCE'\n  }, {\n    origin: 'MUENSTER, NW, GERMANY',\n    destination: 'ROTTERDAM, NETHERLANDS',\n    expectedOrigin: 'MUENSTER, GERMANY',\n    expectedDest: 'ROTTERDAM, NETHERLANDS'\n  }];\n  console.log('=== Google Maps URL Generation Tests ===\\n');\n  testCases.forEach((test, index) => {\n    const url = generateGoogleMapsDirectionsUrl(test.origin, test.destination);\n    const cleanOrigin = cleanLocationString(test.origin);\n    const cleanDest = cleanLocationString(test.destination);\n    const pass = cleanOrigin === test.expectedOrigin && cleanDest === test.expectedDest;\n    console.log(`Test ${index + 1}: ${pass ? '✓ PASS' : '✗ FAIL'}`);\n    console.log(`  Origin: \"${test.origin}\" → \"${cleanOrigin}\"`);\n    console.log(`  Expected: \"${test.expectedOrigin}\"`);\n    console.log(`  Destination: \"${test.destination}\" → \"${cleanDest}\"`);\n    console.log(`  Expected: \"${test.expectedDest}\"`);\n    console.log(`  URL: ${url}`);\n    console.log('');\n  });\n}\n\n// Uncomment to run tests in browser console:\n// testGoogleMapsUrl();","map":{"version":3,"names":["cleanLocationString","location","parts","split","map","s","trim","regionCodes","filtered","filter","part","length","includes","toUpperCase","join","generateGoogleMapsDirectionsUrl","origin","destination","travelMode","cleanOrigin","cleanDestination","baseUrl","params","URLSearchParams","travelmode","toString","estimateZoomLevel","generateGoogleMapsEmbedUrl","_modeToFlag$travelMod","zoom","modeToFlag","driving","walking","bicycling","transit","saddr","daddr","dirflg","output","z","String","testGoogleMapsUrl","testCases","expectedOrigin","expectedDest","console","log","forEach","test","index","url","cleanDest","pass"],"sources":["C:/Users/PNS/Desktop/automation/freight-ui/src/utils/googleMapsHelper.ts"],"sourcesContent":["/**\r\n * Utility functions for generating Google Maps Directions URLs\r\n * No API key required - uses the public Google Maps web interface\r\n */\r\n\r\n/**\r\n * Cleans a location string by removing internal region codes\r\n * (e.g., \"BREMERHAVEN, HB, GERMANY\" -> \"BREMERHAVEN, GERMANY\")\r\n */\r\nexport function cleanLocationString(location: string): string {\r\n  if (!location) return '';\r\n  \r\n  // Split by commas and trim\r\n  const parts = location.split(',').map(s => s.trim());\r\n  \r\n  // Common region codes to filter out (state/province abbreviations)\r\n  const regionCodes = [\r\n    'HB', 'NW', 'BY', 'BW', 'HE', 'RP', 'BB', // German states\r\n    'DROME', 'FRANCE', // Already has country\r\n  ];\r\n  \r\n  // Filter out single/two-letter codes and known region abbreviations\r\n  const filtered = parts.filter(part => {\r\n    // Keep if it's a longer name or if it looks like a country\r\n    if (part.length > 3) return true;\r\n    // Remove if it's a known region code\r\n    if (regionCodes.includes(part.toUpperCase())) return false;\r\n    // Keep otherwise\r\n    return true;\r\n  });\r\n  \r\n  return filtered.join(', ');\r\n}\r\n\r\n/**\r\n * Generates a Google Maps Directions URL for opening in a new tab\r\n * @param origin - Starting location (e.g., \"Le Havre, France\")\r\n * @param destination - Ending location (e.g., \"Bremerhaven, Germany\")\r\n * @param travelMode - Optional travel mode: driving (default), walking, bicycling, transit\r\n * @returns Full Google Maps Directions URL\r\n */\r\nexport function generateGoogleMapsDirectionsUrl(\r\n  origin: string,\r\n  destination: string,\r\n  travelMode: 'driving' | 'walking' | 'bicycling' | 'transit' = 'driving'\r\n): string {\r\n  const cleanOrigin = cleanLocationString(origin);\r\n  const cleanDestination = cleanLocationString(destination);\r\n  \r\n  const baseUrl = 'https://www.google.com/maps/dir/?api=1';\r\n  const params = new URLSearchParams({\r\n    origin: cleanOrigin,\r\n    destination: cleanDestination,\r\n    travelmode: travelMode,\r\n  });\r\n  \r\n  return `${baseUrl}&${params.toString()}`;\r\n}\r\n\r\n/**\r\n * Estimates appropriate zoom level based on origin and destination proximity\r\n * @param origin - Starting location\r\n * @param destination - Ending location\r\n * @returns Zoom level (higher = more zoomed in)\r\n * \r\n * Zoom levels (approximate distance ranges):\r\n * - 9 (120%): ≤200km - Same country, close cities\r\n * - 6 (90%): 200-500km - Same country far, or neighboring countries\r\n * - 5 (70%): 500-900km - Cross-regional routes (e.g., Germany-Italy)\r\n * - 4 (50%): ≥900km - Very distant routes (e.g., Netherlands-Hungary)\r\n */\r\n\r\n// Force all map embeds to use zoom level 6 (80%) for consistent comparison\r\nfunction estimateZoomLevel(origin: string, destination: string): number {\r\n  return 6;\r\n}\r\n\r\n/**\r\n * Generates a Google Maps embed URL for an inline iframe preview (no API key required)\r\n * Uses the public web interface with output=embed. Automatically adjusts zoom based on\r\n * estimated distance (same country = closer = more zoom, different countries = farther = less zoom).\r\n */\r\nexport function generateGoogleMapsEmbedUrl(\r\n  origin: string,\r\n  destination: string,\r\n  travelMode: 'driving' | 'walking' | 'bicycling' | 'transit' = 'driving'\r\n): string {\r\n  const cleanOrigin = cleanLocationString(origin);\r\n  const cleanDestination = cleanLocationString(destination);\r\n\r\n  // Estimate zoom based on location proximity\r\n  const zoom = estimateZoomLevel(origin, destination);\r\n\r\n  // dirflg mapping mirrors Google Maps query params\r\n  const modeToFlag: Record<string, string> = {\r\n    driving: 'd',\r\n    walking: 'w',\r\n    bicycling: 'b',\r\n    transit: 'r',\r\n  };\r\n\r\n  const params = new URLSearchParams({\r\n    saddr: cleanOrigin,\r\n    daddr: cleanDestination,\r\n    dirflg: modeToFlag[travelMode] ?? 'd',\r\n    output: 'embed',\r\n    z: String(zoom),\r\n  });\r\n\r\n  return `https://www.google.com/maps?${params.toString()}`;\r\n}\r\n\r\n/**\r\n * Simple test function to verify URL generation\r\n */\r\nexport function testGoogleMapsUrl(): void {\r\n  const testCases = [\r\n    {\r\n      origin: 'Le Havre, France',\r\n      destination: 'Bremerhaven, Germany',\r\n      expectedOrigin: 'Le Havre, France',\r\n      expectedDest: 'Bremerhaven, Germany',\r\n    },\r\n    {\r\n      origin: 'BREMERHAVEN, HB, GERMANY',\r\n      destination: 'VALENCE, DROME, FRANCE',\r\n      expectedOrigin: 'BREMERHAVEN, GERMANY',\r\n      expectedDest: 'VALENCE, FRANCE',\r\n    },\r\n    {\r\n      origin: 'MUENSTER, NW, GERMANY',\r\n      destination: 'ROTTERDAM, NETHERLANDS',\r\n      expectedOrigin: 'MUENSTER, GERMANY',\r\n      expectedDest: 'ROTTERDAM, NETHERLANDS',\r\n    },\r\n  ];\r\n  \r\n  console.log('=== Google Maps URL Generation Tests ===\\n');\r\n  \r\n  testCases.forEach((test, index) => {\r\n    const url = generateGoogleMapsDirectionsUrl(test.origin, test.destination);\r\n    const cleanOrigin = cleanLocationString(test.origin);\r\n    const cleanDest = cleanLocationString(test.destination);\r\n    \r\n    const pass = cleanOrigin === test.expectedOrigin && cleanDest === test.expectedDest;\r\n    \r\n    console.log(`Test ${index + 1}: ${pass ? '✓ PASS' : '✗ FAIL'}`);\r\n    console.log(`  Origin: \"${test.origin}\" → \"${cleanOrigin}\"`);\r\n    console.log(`  Expected: \"${test.expectedOrigin}\"`);\r\n    console.log(`  Destination: \"${test.destination}\" → \"${cleanDest}\"`);\r\n    console.log(`  Expected: \"${test.expectedDest}\"`);\r\n    console.log(`  URL: ${url}`);\r\n    console.log('');\r\n  });\r\n}\r\n\r\n// Uncomment to run tests in browser console:\r\n// testGoogleMapsUrl();\r\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}